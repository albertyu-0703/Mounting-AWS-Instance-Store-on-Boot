# ============================================================
# AWS Instance Store Mount Configuration
# Version: 5.1
# ============================================================
# 此配置檔會在腳本執行時被載入
# 所有設定都有預設值，您可以根據需求修改
# ============================================================

# ------------------------------------------------------------
# 掛載模式設定
# ------------------------------------------------------------

# 掛載模式
# - single: 每個 Instance Store 個別掛載到不同掛載點
# - raid0:  所有 Instance Store 組成 RAID 0 陣列
MOUNT_MODE="single"

# 是否使用動態生成掛載點
# - true:  自動生成 /mnt/instance_store1, /mnt/instance_store2, ...
# - false: 使用下方 MOUNT_POINTS 指定的固定掛載點
DYNAMIC_MOUNT="true"

# 靜態掛載點 (當 DYNAMIC_MOUNT=false 時使用)
# 以空格分隔，會按順序對應到偵測到的 Instance Store
MOUNT_POINTS="/mnt/instance_store1 /mnt/instance_store2 /mnt/instance_store3 /mnt/instance_store4"

# 掛載點基礎路徑 (動態生成時使用)
BASE_MOUNT_POINT="/mnt/instance_store"

# 是否嚴格比對掛載點數量與 Instance Store 數量
# - true:  數量不符時終止腳本
# - false: 數量不符時僅警告，繼續執行
STRICT_MOUNT_POINT_CHECK="false"

# ------------------------------------------------------------
# RAID 設定 (僅當 MOUNT_MODE=raid0 時生效)
# ------------------------------------------------------------

# RAID 裝置名稱
RAID_DEVICE="/dev/md0"

# RAID 0 模式的掛載點
RAID_MOUNT_POINT="/mnt/instance_store"

# RAID chunk size (KB)
# 較大的 chunk size 適合大檔案循序讀寫
# 較小的 chunk size 適合小檔案隨機讀寫
RAID_CHUNK_SIZE="256"

# ------------------------------------------------------------
# 檔案系統設定
# ------------------------------------------------------------

# 檔案系統類型
# - ext4: 通用，穩定，適合大多數場景
# - xfs:  高效能，適合大檔案和高並發
FILESYSTEM_TYPE="ext4"

# 掛載選項
# - defaults: 預設掛載選項
# - noatime:  不更新存取時間，提升效能
# - nodiratime: 不更新目錄存取時間
MOUNT_OPTIONS="defaults,noatime,nodiratime"

# ext4 格式化選項
# - lazy_itable_init: 延遲初始化 inode 表，加速格式化
# - lazy_journal_init: 延遲初始化日誌，加速格式化
EXT4_FORMAT_OPTIONS="-E lazy_itable_init=0,lazy_journal_init=0"

# xfs 格式化選項
# - -K: 不清除舊資料區塊
XFS_FORMAT_OPTIONS="-K"

# 是否在格式化前清除裝置 (安全考量)
# 建議在共享環境或有安全需求時啟用
WIPE_DEVICE_BEFORE_FORMAT="false"

# ------------------------------------------------------------
# 日誌設定
# ------------------------------------------------------------

# 日誌檔案路徑
LOG_FILE="/var/log/instance-store-mount.log"

# ------------------------------------------------------------
# 郵件通知設定 (選用)
# ------------------------------------------------------------

# 是否啟用郵件通知
ENABLE_EMAIL_NOTIFICATION="false"

# 寄件者 Email
EMAIL_SENDER="noreply@example.com"

# 收件者 Email (以空格分隔多個收件者)
EMAIL_RECIPIENTS="admin@example.com"

# SMTP 設定 (Amazon SES 範例)
SMTP_SERVER="email-smtp.us-east-1.amazonaws.com"
SMTP_PORT="587"
SMTP_USER=""
SMTP_PASSWORD=""

# ------------------------------------------------------------
# 進階設定
# ------------------------------------------------------------

# 執行完成後呼叫的腳本 (可選)
# 腳本必須具有可執行權限
# 範例: POST_MOUNT_SCRIPT="/usr/local/bin/after-mount.sh"
POST_MOUNT_SCRIPT=""
